<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    * {
        box-sizing: border-box;
    }
    .column {
        float: left;
        width: 25%;
        padding: 10px;
    }
    .row:after {
        content: "";
        display: table;
        clear: both;
}
</style>
</head>
<body>
<h1>Database: Customer - primitive interface</h1>
    <div class="column">
        <button onclick="myFunction()" >
            Display all entries
        </button>    
        <pre id="json"></pre>
    </div>
    <div class="column">
        <h2>
            Add new entry
        </h2>
            <form class="form">
                <input name="vorname" type="text" placeholder="Vorname">
                <Input name="nachname" type="text" placeholder="Nachname">

            <button type="submit">Add to Database</button>
            </form>
    </div>
    <div class="column">
        <h2>
            Delete entry
        </h2>
        <p>
            Choose the id number of the entry you want to delete:
        </p>
            <input type="number" id="id" value="">
            <button onclick="deleteIt()">
                Delete
            </button>
    </div>

  <script>
    function myFunction() {
        
        function getData(url, cb) {
        fetch(url)
          .then(response => response.json())
          .then(result => cb(result));
        }

        getData("http://40.115.21.0:8080/customer/", (data) => document.getElementById("json").innerHTML = JSON.stringify(data, undefined, 2));     
    }

    const formADD = document.querySelector('.form');

    formADD.addEventListener('submit', event => {
        event.preventDefault();
        const formData = new FormData(formADD);
        const data = Object.fromEntries(formData);
        fetch("http://40.115.21.0:8080/customer/id", {
          method: 'POST',
          headers: {
            'Accept' : 'application/json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)  
        }) 
    })

    function deleteIt() {
        const x = document.getElementById("id").value
        fetch("http://40.115.21.0:8080/customer/" + x,
        {
            method: 'Delete'
        })
    }

  </script>
</body>

</html>